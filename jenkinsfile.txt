pipeline {
agent { label 'master' } 
\\parameters{}
stages{ //stages op
    stage ('prep-clone') {
          steps {
                git url: "https://github.com/lavih/jenkins-python-server.git"
                     }
                                        }
stage ('build&deploy') {
                          steps{
                  dockerfile{
                 filename 'dockerfile-server.txt'
                 //additionalBuildArgs -t python-server
                 //additionalBuildArgs tag=someValue
                 dockerFingerprintFrom dockerfile: 'dockerfile-server.txt', image: 'python-server'
                                   }
                                   }
                                        }

                        

stage ('test'){
     steps {
         withDockerRegistry(credentialsId: 'dockerhub', url: 'https://cloud.docker.com/u/lavih/repository/docker/lavih/nodejs-build')
               }
                      }

     

       } //stages cl
} //pipeline cl
 